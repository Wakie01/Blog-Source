---
title: 分布式数据库阅读
comment: true
date: 2021-05-14 16:36:21
tags:
categories:
addrlink:
---

# 分布式数据库系统
早在1995的时候，毛法尧就对分布式数据库系统进行了评价，并的设计、分布式查询处理、进行了评价，

## 分布式数据库评价

分布式数据库系统是数据通信和数据库管理相结合的成果，它具有数据共享、可靠性高、可用性好、查询速度快等优点，但也有软件开发成本高、故障率较高、处理总开销较大等缺点。

## 分布式数据库设计

在设计分布式数据库时，主要有三大问题：

- **重复：** 系统保持几个相同的副本，每个副本放在不同的结点内，形成数据重复。
- **分段：** 将关系划分成若干片段，每个片段放在不同的结点内。
- **重复和分段：** 上述两种概念的结合，关系可分成几个片段，系统保持每个片段的若干个相同的副本。



### 数据重复

数据重复既有利也有弊。

- **利：** 可用性好，当某个结点失效时，包含副本的结点可以替代该出错结点；提高并行性。
- **弊：** 增加了总开销。

总的来说，数据重复增强了读运算的性能，提高了数据处理的可用性，但也增加了系统的总开销。



### 数据分段

将一个关系分割成片段主要有两种方法：水平分段和垂直分段。

- **水平分段：** 把全局关系的元组分割成一些子集，通过对所有片段取并可使全局关系重构。
- **垂直分段：** 把全局关系的属性再分成若干组，把此全局关系投影到每组上就得到片段。

此外，还有一种分段方法：

- **混合分段：** 将水平分段和垂直分段同时应用到同一个关系中，比如把水平片段应用到垂直片段中，或者反过来。



## 分布式查询处理

对于传统的集中式数据库系统，评价某一查询策略的主要依据是磁盘的访问次数，然而，在分布式数据库系统中，还需要考虑以下问题：

- 数据在网上传送的代价。
- 某些结点的并行查询引起的性能增进。



## 分布式数据库的并发控制和恢复



### 并发控制

在传统的集中式数据库系统中，并发控制问题主要是通过事务来解决，然而传统的事务管理并不能满足分布式数据库系统并发控制的要求。

在分布式数据库中，常见的有两种并发控制算法：`两阶段锁定协议`和`时间戳`

#### 两阶段锁定协议

两阶段锁定协议保证冲突连续性，并不保证免除死锁。



#### 时间戳

每个事务赋予唯一的时间戳，这样，事务处理的执行等效于时间戳序列的串行执行。

它可以保证避免死锁，因为事务决不被阻塞，如果事务不能执行某一种运算，它将被重新起动。



## 结论

计算机网络领域的技术进展已使得分布式数据库实现成为可能。

分布式数据库的主要优点是数据共享、可靠性高、可用性好和快速查询处理。此外，分布式数据库的目的在于保持局部自治。

分布式数据库的主要问题可分类成数据组织、并发、恢复和分布式查询处理。

分布式数据库的主要缺点是增添的复杂性导致软件开发成本提高，处理总开销增加和整
个数据库系统的错误运算。







# 基于Petri网合成与化简的分布式数据库系统并发控制的死锁检测

## Petri网

Petri网是对离散并行系统的数学表示。由20世纪60年代由卡尔·A·佩特里发明，适合于描述异步的、并发的计算机系统模型。



## 本文创新思想

利用模块化设计的思想，

首先，为分布式数据库系统中的各个事务中的每一种操作(读锁、写锁、解锁)构造一个基本的加权Petri网模型；

然后，利用共享合成技术，动态地构造各站点的加权Petri网模型，以适应系统的动态变化；

然后，利用Petri网的化简技术，对各站点的加权Petri网模型进行化简

然后，利用同步合成技术构造出整个系统的Petri网模型；

最后，通过整个系统的Petri网模型来找出出现死锁的充分必要条件。









## 背景

1. 两阶段锁定协议是一种正确的分布式并发控制方法，但它却不能解决系统中可能出现的死锁状况。所以在使用该协议来进行并发控制时，需要利用某种死锁检测算法来检测系统是否出现死锁现象。常用的死锁检测算法有`等待图算法`，`基于优先级的死锁检测算法`等。

2. Petri网适合于描述异步的、并发的计算机系统模型。
3. 



## 创新点

提出了一种Petri网构建方法，该方法

- 遵守`两阶段锁定协议`
- 适用于分布式数据库系统
- 关于检测死锁的
- 可以动态地建模
- 能解决在可达性分析中出现状态“爆炸”问题



# 以Petri网为描述工具的分布式数据库系统研究

## 本文内容

本文给出了一种以Petri网为描述工具的分布式数据库设计方法。





## 背景

之前的分布式数据库设计方法分为集中式、联邦式和分布式。

这3种传统的分布式数据库设计方法都是从集中式数据库设计方法演绎而来，比较明显的缺点是不能充分反映分布式数据库的本质特征。



## 设计方法

他把Petri 网用于分布式数据库设计的整个过程，统一了数据库设计的各个阶段采用的工具和方法，使各阶段之间的衔接自然而流畅。

其次，他扩充了Petri网概念，引入了层次Petri网概念。层次Petri网是基本Petri网的一种推广，其状态转换规则与基本Petri网是一致的。它显然增加了逐步求精描述能力和数据对象结构的跟踪描述能力，从而，在一定程度上弥补了基本Petri网的不足。



## 创新思想

1. 将Petri网应用于分布式数据库设计
2. 扩充了Petri网的概念，引入了层次Petri网的概念
3. 将分布式数据库设计的整个过程划分成需求分析阶段、概念设计阶段、逻辑设计阶段、片的分割和片的分布设计四个阶段



# 基于CPN 建模技术的研究

## 本文内容

在Petri网的基础上，引入了有色Petri网（Coloured Petri Nets，CPN）的概念。然后通过CPN对分布式数据库系统进行设计。



## 创新思想

在Petri网的基础上，引入了有色Petri网（Coloured Petri Nets，CPN）的概念



## 不足

模型检验技术中的状态爆炸问题仍没有很好的解决办法



# 分布式实时数据库系统中事务并发控制策略研究

## 本文内容

关于分布式实时数据库中的事务并发控制中，作者结合虚拟锁和乐观法等思想，提出两种新的解决方案：`2PL-HP协议`和`OPT-Sacrifice协议`，这两种方法的重点都是提高实时性。



## 背景

随着分布式数据库的应用越来越广，各个领域对分布式数据库的要求也越来越高，比如实时性。

通过把对事务要求有实时性的分布式数据库系统称为**分布式实时数据库**。

实时是针对数据库系统中的事务处理而言的，事务只有在执行期限前完成才是有效的事务，否则是无效的事务，将被系统立即停止和废弃。



## 创新思想

1. 在传统事务并发控制协议的基础上，结合虚拟锁和乐观法等思想，提出两种新的关于分布式实时数据库事务并发控制的解决方案：`2PL-HP协议`和`OPT-Sacrifice协议`

   - **2PL-HP协议：**

     2PL-HP，2PL-High Priority，它是二阶段加锁协议和优先级机制的结合。在这种机制下，事务申请资源时要按照各自优先级的高低来相应处理。

     可提高事务的并发度，减少阻塞的发生，从而满足实时性的要求。

   - **OPT-Sacrifice协议：**
   
     它也是引入事务的优先级机制，在发生冲突时，直接牺牲低优先级的事务。
     
     在提高事务并发度的基础上，尽量保护那些已经进入提交状态的事务，降低无辜牺牲的几率，从而减少因为错过执行期限而被迫废弃的事务的数目，满足事务实时性的要求。





## 不足

**2PL-HP协议：**

仅仅考虑了事务的执行期限问题，而没有考虑事务的执行时间等问题，在某种程度上对事务的破坏性较大。例如长事务可能会因为优先级较低而经常被优先级较高的事务频繁打断，造成优先级较低的事务频繁回卷牺牲。



**OPT-Sacrifice协议：**

与2PL-HP协议类似，对进入验证阶段的事务缺乏有效的保护。已经进入验证阶段的事务往往因为冲突集中，并且有高优先级的事务的存在而被迫牺牲。





# 分布式数据库系统的并发控制算法综述



## 本文内容

阐述并发控制的传统算法和一些其他算法，并给出衡量并发控制算法性能的方法



## 创新思想

总结并发控制算法的衡量准则：

- 站点问通信的开销。它的衡量尺度是总的通信量、站点间相互通信的次数和站点间距离、网络结构和队列效应等
- 局部处理的开销。它的衡量尺度是同步信息的维护和处理，同步信息包括锁、时间戳和版本数；
- 由该算法所引起的事务重启动的次数和费用
- 由该算法所引起的事务阻塞的数量和每次阻塞的延迟时间



# 基于分布式事务流的动态可串行调度算法

## 本文内容

针对分布式数据库中发生待处理的事务流提出一种动态可串行调度算法。通过执行此算法，能够高效地处理源源不断的事务流，使之尽可能串行调度地执行，从而提高并发度，以及分布式数据库各站点的并行处理度。



## 创新思想

针对分布式实时事务流中每一个全局事务分解后，在每个站点根据短子事务动作优先以及出现写-读冲突、读-写冲突、写-写冲突时按事务请求的先后次序方式处理，生成执行效率比较高的可串行调度子事务动作序列，从而提高并发度和并行处理度。

总的来说就是将并行串行化，从而解决冲突。







# 参考

[1] 毛法尧. 分布式数据库系统[J]. 小型微型计算机系统, 1995, 016(008):55-60.

[2] 韩耀军, 蒋昌俊, 罗雪梅. 基于Petri网合成与化简的分布式数据库系统并发控制的死锁检测[J]. 小型微型计算机系统, 2004, 25(5):821-821.

[3] 肖乾, 刘忻. 以Petri网为描述工具的分布式数据库系统研究[J]. 舰船科学技术, 2004(04):69-72.

[4] 田保军. 基于CPN建模技术的研究[C]// 全国petri网学术年会暨形式化方法学术讨论会. 中国计算机学会, 2005.

[5] 夏继梅. 分布式实时数据库系统中事务并发控制策略研究[J]. 山西师范大学学报:自然科学版, 2007(S1):161-164.

[6] 古明家. 分布式数据库系统的并发控制算法综述[J]. 现代计算机:下半月版, 2008(03):147-149.

[7] 梁雄友, 薛永生. 基于分布式事务流的动态可串行调度算法[J]. 计算机工程与应用, 2010, 46(008):144-147.